"use strict";const apiKey="AIzaSyDXoPz_b2SX6WxGK1SipZyl773po2WvX2s",mapApiJs="https://maps.googleapis.com/maps/api/js",geocodeJson="https://maps.googleapis.com/maps/api/geocode/json",textsearchJson="https://maps.googleapis.com/maps/api/place/textsearch/json",svgPath="M52.747,0a15.02,15.02,0,0,0-15,15.006c0,12.328,13.507,24.366,14.082,24.872a1.389,1.389,0,0,0,1.836,0c.575-.506,14.082-12.544,14.082-24.872A15.02,15.02,0,0,0,52.747,0Zm0,10.793a4.213,4.213,0,1,1-4.167,4.213A4.195,4.195,0,0,1,52.747,10.793Z";let CSRF,dispatcher,spinerSetter,loadingSetter,searchInput,infoWindow,bounds,directionsService,directionsRenderer,checkedFilters=["ATMDP","ATMSF","ESC"],markers=[],map=null,aborter=null;/* ---- Reducer ---- */function reducer(a,b){switch(b.type){case"SCRIPT_LOAD":return{...a,scriptLoad:b.payload};case"SHOW_APP":return{...a,showApp:b.payload};case"SHOW_ERROR":return{...a,showError:b.payload};case"SET_LOCATION":return{...a,location:b.payload};case"SET_RESULT":return{...a,result:b.payload};default:throw new Error;}}/* ---- Functions ---- */const loadAsyncScript=a=>new Promise(b=>{const c=document.createElement("script");Object.assign(c,{type:"text/javascript",async:!1,defer:!0,src:a}),c.addEventListener("load",()=>{b(c),dispatcher({type:"SCRIPT_LOAD",payload:!0})}),document.head.appendChild(c)}),initMapScript=()=>{// if script already loaded
if(window.google)return Promise.resolve();return loadAsyncScript(`${mapApiJs}?key=${apiKey}&libraries=places,geometry&v=weekly&callback=initMap`)},extractAddress=a=>{let b=a.geometry?.location.lat;b&&"function"==typeof b&&(b=a.geometry.location.lat());let c=a.geometry?.location.lat;c&&"function"==typeof c&&(c=a.geometry.location.lng());const d={city:"",state:"",zip:"",country:"",lat:b||"",lng:c||"",address:a.address||"",type:""};return Array.isArray(a?.address_components)?(a.address_components.forEach(a=>{const b=a.types,c=a.long_name;b.includes("locality")&&(d.city=c),b.includes("administrative_area_level_1")&&(d.state=c),b.includes("postal_code")&&(d.zip=c),b.includes("country")&&(d.country=c)}),d):d},extractStateCode=a=>{let b="";return b="NJ"===a?"New Jersey":"CT"===a?"Connecticut":"NY"===a?"New York":"AL"===a?"Alabama":"AK"===a?"Alaska":"AZ"===a?"Arizona":"AR"===a?"Arkansas":"CA"===a?"California":"CO"===a?"Colorado":"DE"===a?"Delaware":"DC"===a?"District of Columbia":"FL"===a?"Florida":"GA"===a?"Georgia":"HI"===a?"Hawaii":"ID"===a?"Idaho":"IL"===a?"Illinois":"IN"===a?"Indiana":"IA"===a?"Iowa":"KS"===a?"Kansas":"KY"===a?"Kentucky":"LA"===a?"Louisiana":"ME"===a?"Maine":"MD"===a?"Maryland":"MA"===a?"Massachusetts":"MI"===a?"Michigan":"MN"===a?"Minnesota":"MS"===a?"Mississippi":"MO"===a?"Missouri":"MT"===a?"Montana":"NE"===a?"Nebraska":"NV"===a?"Nevada":"NH"===a?"New Hampshire":"NM"===a?"New Mexico":"NC"===a?"North Carolina":"ND"===a?"North Dakota":"OH"===a?"Ohio":"OK"===a?"Oklahoma":"OR"===a?"Oregon":"PA"===a?"Pennsylvania":"RI"===a?"Rhode Island":"SC"===a?"South Carolina":"SD"===a?"South Dakota":"TN"===a?"Tennessee":"TX"===a?"Texas":"UT"===a?"Utah":"VT"===a?"Vermont":"VA"===a?"Virginia":"WA"===a?"Washington":"WV"===a?"West Virginia":"WI"===a?"Wisconsin":"WY"===a?"Wyoming":a,b},sortAlphabetically=a=>(Object.entries(a).forEach(([a,b])=>{b.sort((c,a)=>c.CityName.localeCompare(a.CityName))}),a),sortDistance=a=>a.sort((c,a)=>+c.distance-+a.distance),extractLocations=a=>a.reduce((a,b)=>{let c=b.attributes.StateCode;return a[c]||(a[c]=[]),a[c].push(b.attributes),a},{}),checkAddress=a=>{const b=new window.google.maps.Geocoder;return b.geocode({address:a}).then(a=>{const{results:b}=a;return a}).catch(()=>!1)},reverseGeocode=({latitude:a,longitude:b})=>{fetch(`${geocodeJson}?key=${apiKey}&latlng=${a},${b}`).then(a=>a.json()).then(a=>{const b=a.results[0],c=extractAddress(b);searchInput.current.value=b.formatted_address,window.dataLayer.push({event:"content-interaction",eventCategory:"content-interaction",eventAction:"Use current location",eventLabel:b.formatted_address}),fetchLocations(c,CSRF)}).catch(a=>{console.log("Geocode was not successful for the following reason: ",a),searchInput.current.value="! We could not find your location.",alert("Your location was unable to be determined. If your browser or device supports HTML5 Geolocation, please check your settings to verify that it is enabled."),searchInput.current.value=""})},findMyLocation=()=>{loadingSetter(!0),spinerSetter(!0),removeDirectionRenderer(),navigator.geolocation?(searchInput.current.value="Getting your location...",navigator.geolocation.getCurrentPosition(a=>{reverseGeocode(a.coords)})):(searchInput.current.value="",alert("Your location was unable to be determined."))},getCurrentLocation=async()=>(loadingSetter(!0),new Promise(a=>{navigator.geolocation&&(searchInput.current.value="Getting your location...",navigator.geolocation.getCurrentPosition(b=>{a(b.coords),loadingSetter(!1)}))})),fetchLocations=(a,b)=>{console.log("CSRFToken",b),loadingSetter(!0),aborter&&aborter.abort(),aborter=new AbortController;// make our request cancellable
const c=aborter.signal;let d=new FormData;d.append("AddressLine",a.address||""),d.append("Type",a.type||""),d.append("City",a.city||""),d.append("State",a.state||""),d.append("PostalCode",a.zip||""),d.append("Country",a.country||""),d.append("Latitude",a.lat||""),d.append("Longitude",a.lng||""),d.append("CSRFToken",b),fetch("API/Find-Locations.json",{signal:c,method:"POST",body:d}).then(a=>a.json()).then(a=>{aborter=null,console.log("data",a);const b=a.data.locations;"Success"==a.message?dispatcher({type:"SHOW_ERROR",payload:!1}):(loadingSetter(!1),spinerSetter(!1)),dispatcher({type:"SET_RESULT",payload:sortDistance(b)}),spinerSetter(!1),loadingSetter(!1)}).catch(a=>{a instanceof DOMException&&"AbortError"==a.name?(dispatcher({type:"SHOW_ERROR",payload:!1}),loadingSetter(!0)):(dispatcher({type:"SHOW_ERROR",payload:!0}),console.error("fetchLocations Error:",a))})},fetchBranches=async a=>{loadingSetter(!0);let b=new FormData;return b.append("CSRFToken",a),await fetch("API/Get-Locations-List.json",{method:"POST",body:b}).then(a=>a.json()).then(a=>a.data.locations).catch(a=>{dispatcher({type:"SHOW_APP",payload:!1}),console.error("fetchBranches Error:",a)}).finally(()=>loadingSetter(!1))},initMap=()=>{const a=new window.google.maps.LatLng(40.85543134,-74.0663631);//FCS Location
map=new window.google.maps.Map(document.getElementById("g-map"),{zoom:10,center:a}),infoWindow=new window.google.maps.InfoWindow({maxWidth:340}),directionsService=new window.google.maps.DirectionsService,directionsRenderer=new window.google.maps.DirectionsRenderer};window.initMap=initMap;const removeMarkers=()=>{for(let a=0;a<markers.length;a++)markers[a].setMap(null);markers=[]},setMarkers=a=>{Object.keys(a).length&&(// Create the markers.
//now fit the map to the newly inclusive bounds
bounds=new google.maps.LatLngBounds,removeMarkers(),a.forEach(a=>{let b;const c=a.attributes.LocationType,d=a.attributes.LocationName,e=a.additionalServices.service,f="Affinity Federal Credit Union";switch(!0){case"BRANCH"===c&&d===f:b="#0B4161";break;case"BRANCH"===c&&d!==f:b="#00A1AF";break;case"ATM"===c&&e.includes("AcceptDeposits"):b="#22205F";break;case"ATM"===c&&e.includes("Surcharge Free"):b="#00AA5A";break;default:b="#0B4161";}const g=`
  <div class="info-window">
      <h3 class="heading heading-m info-title">${a.attributes.LocationName}</h3>
      <p class="text text-x-large info-address">${a.address.street} ${a.address.city}, ${a.address.state} ${a.address.zip}</p>
      <button class="btn btn-medium btn-primary btn-weight-medium" data-lat="${a.address.lat}" data-long="${a.address.Long}" onclick=calculateAndDisplayRoute(this)>Get Directions</button>
  </div>
  `,h=new window.google.maps.Marker({position:{lat:+a.address.lat,lng:+a.address.Long},map,title:`${a.attributes.AddressLine}`,label:"ATM"===c?{text:"$",fontSize:"24px",className:e.includes("AcceptDeposits")?"gpin-blue":"gpin-green",color:"white",fontWeight:"bold"// origin: new google.maps.Point(40, 29),
}:null,optimized:!0,icon:{path:svgPath,fillColor:b,fillOpacity:1,strokeWeight:2,strokeOpacity:.8,strokeColor:"white",anchor:new google.maps.Point(53,40)//66
}});// Add a click listener for each marker, and set up the info window.
bounds.extend(h.position),h.addListener("click",()=>{//marker.getTitle()
infoWindow.close(),infoWindow.setContent(g),infoWindow.open(h.getMap(),h)}),markers.push(h)}),map.fitBounds(bounds))},addDragendListener=()=>{window.google.maps.event.addListener(map,"dragend",function(){const a=bounds.contains(map.getCenter());if(!a){const a=this.getCenter(),b=a.lat(),c=a.lng();fetchLocations({lat:b,lng:c,type:checkedFilters.toString()},CSRF)}})},removeDragendListener=()=>{google.maps.event.clearListeners(map,"dragend")},addDirectionRenderer=()=>{directionsRenderer.setMap(map)},removeDirectionRenderer=()=>{directionsRenderer.setMap(null),directionsRenderer.length=0,directionsRenderer.setDirections({routes:[]})},calculateAndDisplayRoute=async a=>{infoWindow.close(),addDirectionRenderer(),removeDragendListener();const b=a.dataset.lat,c=a.dataset.long,d=await getCurrentLocation().then(a=>new window.google.maps.LatLng(a.latitude,a.longitude)),e=new window.google.maps.LatLng(b,c);directionsService.route({origin:d,destination:e,travelMode:"DRIVING"},function(a,b){"OK"==b?directionsRenderer.setDirections(a):(alert("directions request failed, status="+b),searchInput.current.value="")}),window.dataLayer.push({event:"content-interaction",eventCategory:"content-interaction",eventAction:"Nearest Location",eventLabel:"Get Directions"})},Spinner=()=>/*#__PURE__*/React.createElement("div",{className:"loader"}),LocationIcon=()=>/*#__PURE__*/React.createElement("div",{className:"loc-icon"},/*#__PURE__*/React.createElement("svg",{baseProfile:"tiny",height:"24",version:"1.2",width:"24",xmlns:"http://www.w3.org/2000/svg"},/*#__PURE__*/React.createElement("path",{d:"M10.368 19.102c.349 1.049 1.011 1.086 1.478.086l5.309-11.375c.467-1.002.034-1.434-.967-.967L4.812 12.154c-1.001.467-.963 1.129.085 1.479L9 15l1.368 4.102z"}))),ShowError=({text:a})=>/*#__PURE__*/React.createElement("section",{className:"section",id:"error-section","data-features":"Error"},/*#__PURE__*/React.createElement("div",{className:"container dir-col",style:{textAlign:"center",marginBottom:"20px",marginTop:"20px"}},a)),Search=()=>{const[a,b]=React.useState(!1);searchInput=React.useRef(null),React.useEffect(()=>{spinerSetter=b},[]);return React.useEffect(()=>{if(!searchInput.current)return;const a=new window.google.maps.places.Autocomplete(searchInput.current);a.setFields(["formatted_address","address_component","geometry"]),a.setComponentRestrictions({country:["us"]}),a.addListener("place_changed",async function(c){dispatcher({type:"SHOW_ERROR",payload:!1}),b(!0),loadingSetter(!0);const d=await a.getPlace();dispatcher({type:"SET_LOCATION",payload:extractAddress({...d,address:searchInput.current.value})}),window.dataLayer.push({event:"form-submit",eventCategory:"form-interaction",eventAction:"find a location",eventLabel:searchInput.current.value})})},[]),/*#__PURE__*/React.createElement("section",{className:"section",id:"location-search-section","data-features":"Location Search"},/*#__PURE__*/React.createElement("div",{className:"location-container"},/*#__PURE__*/React.createElement("div",{className:"location-search",id:"container-location-search"},/*#__PURE__*/React.createElement("form",{className:"location-search-form",id:"form-location-search",action:"",onSubmit:a=>a.preventDefault()},/*#__PURE__*/React.createElement("div",{className:"form-group"},/*#__PURE__*/React.createElement("div",{className:"location-search-top"},/*#__PURE__*/React.createElement("label",{className:"form-label",htmlFor:"loc"},"Locate a store"),/*#__PURE__*/React.createElement("div",{className:"current-location"},/*#__PURE__*/React.createElement(LocationIcon,null),/*#__PURE__*/React.createElement("div",{className:"current-location-text",onClick:findMyLocation},"Use current location"))),/*#__PURE__*/React.createElement("input",{ref:searchInput,type:"search",id:"loc",name:"loc",className:"input loc-search form-input",placeholder:"Search by ZIP Code, city or state"})),/*#__PURE__*/React.createElement("button",{type:"button",onClick:async a=>{const c=searchInput.current.value;c&&checkAddress(c).then(function(a){if(a){const d=Object.assign({address:c},a.results[0]);dispatcher({type:"SHOW_ERROR",payload:!1}),b(!0),loadingSetter(!0),dispatcher({type:"SET_LOCATION",payload:extractAddress(d)}),window.dataLayer.push({event:"form-submit",eventCategory:"form-interaction",eventAction:"find a location",eventLabel:c})}else dispatcher({type:"SHOW_ERROR",payload:!0})})},disabled:a,className:"btn location-submit submit-button",id:"btn-location-submit","aria-label":"FIND A LOCATION"},a&&/*#__PURE__*/React.createElement(Spinner,null),"FIND A LOCATION")))))},Map=()=>{const[a,b]=React.useState(!1);return React.useEffect(()=>{loadingSetter=b},[]),/*#__PURE__*/React.createElement("section",{className:"section",id:"map-section","data-features":"Map"},/*#__PURE__*/React.createElement("div",{className:"map-cover"},a&&/*#__PURE__*/React.createElement("div",{className:"loading-cover"}),/*#__PURE__*/React.createElement("div",{id:"g-map"})))},Filters=a=>{const[b,c]=React.useState(["ATMDP","ATMSF","ESC"]),d=[{id:"0",value:"FCS",name:"Affinity FCU Locations",logo:"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"29.498\" viewBox=\"0 0 22 29.498\"><path id=\"location-pin-svgrepo-com\" d=\"M48.747,0a11.015,11.015,0,0,0-11,11c0,9.041,9.905,17.868,10.327,18.24a1.018,1.018,0,0,0,1.346,0c.422-.371,10.327-9.2,10.327-18.24A11.015,11.015,0,0,0,48.747,0Zm0,7.915A3.089,3.089,0,1,1,45.691,11,3.076,3.076,0,0,1,48.747,7.915Z\" transform=\"translate(-37.747)\" fill=\"#0b4161\"/></svg>"},{id:"1",value:"ESC",name:"Shared Branching",checked:!0,logo:"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"29.498\" viewBox=\"0 0 22 29.498\"><path id=\"location-pin-svgrepo-com\" d=\"M48.747,0a11.015,11.015,0,0,0-11,11c0,9.041,9.905,17.868,10.327,18.24a1.018,1.018,0,0,0,1.346,0c.422-.371,10.327-9.2,10.327-18.24A11.015,11.015,0,0,0,48.747,0Zm0,7.915A3.089,3.089,0,1,1,45.691,11,3.076,3.076,0,0,1,48.747,7.915Z\" transform=\"translate(-37.747)\" fill=\"#00a1af\"/></svg>"},{id:"2",value:"ATMDP",name:"Deposit Taking ATMs",checked:!0,logo:"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"21.645\" height=\"29.022\" viewBox=\"0 0 21.645 29.022\"><g id=\"Group_1321\" data-name=\"Group 1321\" transform=\"translate(-1084.855 -1665.43)\"><path id=\"location-pin-svgrepo-com\" d=\"M48.569,0A10.837,10.837,0,0,0,37.747,10.827c0,8.895,9.745,17.58,10.16,17.945a1,1,0,0,0,1.325,0c.415-.365,10.16-9.05,10.16-17.945A10.837,10.837,0,0,0,48.569,0Z\" transform=\"translate(1047.108 1665.43)\" fill=\"#22205f\"/><text id=\"_\" data-name=\"$\" transform=\"translate(1090 1665.43)\" fill=\"#fff\" font-size=\"18\" font-family=\"Poppins-SemiBold, Poppins\" font-weight=\"600\"><tspan x=\"0\" y=\"19\">$</tspan></text></g></svg>"},{id:"3",value:"ATMSF",name:"Surcharge-Free ATMs",checked:!0,logo:"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"21.34\" height=\"29.021\" viewBox=\"0 0 21.34 29.021\"><g id=\"Group_1322\" data-name=\"Group 1322\" transform=\"translate(-1111.33 -1665.43)\"><path id=\"location-pin-svgrepo-com\" d=\"M48.417,0a10.684,10.684,0,0,0-10.67,10.674c0,8.769,9.608,17.332,10.017,17.692a.988.988,0,0,0,1.306,0c.409-.36,10.017-8.923,10.017-17.692A10.684,10.684,0,0,0,48.417,0Z\" transform=\"translate(1073.583 1665.838)\" fill=\"#00aa5a\"/><text id=\"_\" data-name=\"$\" transform=\"translate(1116.5 1665.43)\" fill=\"#fff\" font-size=\"18\" font-family=\"Poppins-SemiBold, Poppins\" font-weight=\"600\"><tspan x=\"0\" y=\"19\">$</tspan></text></g></svg>"}],e=a=>{const d=a.target.value,e=a.target.checked;e&&!b.includes(d)?c([...b,d]):c(b.filter(a=>a!==d))};return React.useEffect(()=>{b.length?(a.parentCallback(b),checkedFilters=b):a.parentCallback([""])},[b]),/*#__PURE__*/React.createElement("section",{className:"section",id:"filter-section","data-features":"Filters"},/*#__PURE__*/React.createElement("div",{className:"filter-container"},/*#__PURE__*/React.createElement("div",{className:"container dir-col"},/*#__PURE__*/React.createElement("div",{className:"filter-cover"},/*#__PURE__*/React.createElement("h6",{className:"heading heading-xxs"},"Filter results by choosing all that apply:"),/*#__PURE__*/React.createElement("div",{className:"filters"},d.map(a=>/*#__PURE__*/React.createElement("div",{className:"form-check",key:a.id},/*#__PURE__*/React.createElement("div",{className:"filter-logo",dangerouslySetInnerHTML:{__html:a.logo}}),/*#__PURE__*/React.createElement("input",{className:"form-check-input",name:"filters",type:"checkbox",value:a.value,id:a.value,onChange:e,defaultChecked:a.checked}),/*#__PURE__*/React.createElement("label",{className:"form-check-label",htmlFor:a.value},a.name))))))))},List=a=>{const[b,c]=React.useState(8);React.useEffect(()=>{c(8)},[a.result]);const d=a.result,e=Object.keys(d).length;if(d&&e){const f=a=>{a.preventDefault(),c(a=>a+8),window.dataLayer.push({event:"content-interaction",eventCategory:"content-interaction",eventAction:"find a location",eventLabel:"load more location"})};return/*#__PURE__*/React.createElement("section",{className:"section",id:"result-section","data-features":"Results"},/*#__PURE__*/React.createElement("div",{className:"result-container"},/*#__PURE__*/React.createElement("div",{className:"container dir-col"},/*#__PURE__*/React.createElement("div",{className:"result-title"},/*#__PURE__*/React.createElement("h6",{className:"heading heading-l"}," ",0==Object.keys(a.locations).length?"":"Results")),/*#__PURE__*/React.createElement("div",{className:"result-cover"},d.slice(0,b).map((a,b)=>/*#__PURE__*/React.createElement("div",{className:"result-item",key:b},/*#__PURE__*/React.createElement("div",{className:"result-number"},b+1),/*#__PURE__*/React.createElement("div",{className:"result-details"},/*#__PURE__*/React.createElement("div",{className:"result-title"},a.attributes.LocationName),"0.00"!=a.distance&&/*#__PURE__*/React.createElement("div",{className:"result-distance"},parseFloat(a.distance)," mi"),/*#__PURE__*/React.createElement("div",{className:"result-address"},a.address.street," ",a.address.city," ",a.address.state," ",a.address.zip),a.attributes.Phone&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement("div",{className:"result-title"},"Phone"),/*#__PURE__*/React.createElement("div",{className:"result-desc"},a.attributes.Phone)),a.attributes.Fax&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement("div",{className:"result-title"},"Fax"),/*#__PURE__*/React.createElement("div",{className:"result-desc"},a.attributes.Fax)),a.attributes.RetailOutlet&&/*#__PURE__*/React.createElement("div",{className:"result-distance",style:{marginTop:"10px"},dangerouslySetInnerHTML:{__html:a.attributes.RetailOutlet}}))))),b<=e&&/*#__PURE__*/React.createElement("div",{className:"load-more-result"},/*#__PURE__*/React.createElement("button",{className:"btn btn-medium btn-primary btn-weight-medium",onClick:f},"LOAD MORE")))))}},AccordionItem=a=>/*#__PURE__*/React.createElement("div",{className:"item-details"},/*#__PURE__*/React.createElement("div",{className:"item-title"},/*#__PURE__*/React.createElement("h6",{className:"heading heading-xxs"},a.data.CityName," Branch")),/*#__PURE__*/React.createElement("div",{className:"item-desc"},/*#__PURE__*/React.createElement("p",{className:"text text-large"},a.data.AddressLine),/*#__PURE__*/React.createElement("p",{className:"text text-large"},a.data.CityName," ",a.data.StateCode," ",a.data.PostalCode),/*#__PURE__*/React.createElement("p",{className:"text text-large"}," ",a.data.Phone))),Accordion=a=>{function b(a){d(!c),f(c?"0px":`${g.current.scrollHeight}px`),c||window.trackParcer(a.target)}const[c,d]=React.useState(!1),[e,f]=React.useState("0px"),g=React.useRef(null);return/*#__PURE__*/React.createElement("div",{className:"accordion-item",key:a.state},/*#__PURE__*/React.createElement("header",{className:`accordion-header ${c?"active":""}`,onClick:b,"data-tracker-identifier":"CONTENT","data-event-action":a.title,"data-event-title":extractStateCode(a.state)},/*#__PURE__*/React.createElement("h6",{className:"heading heading-xs"},extractStateCode(a.state)),/*#__PURE__*/React.createElement("div",{className:"accordion-icon"},/*#__PURE__*/React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"11"},/*#__PURE__*/React.createElement("path",{d:"M10.59 0 6 4.574 1.41 0 0 1.408 6 7.4l6-5.992Z"})))),/*#__PURE__*/React.createElement("div",{className:"item-content",ref:g,style:{maxHeight:`${e}`}},/*#__PURE__*/React.createElement("div",{className:"accordion-items"},a.data.map((a,b)=>/*#__PURE__*/React.createElement(AccordionItem,{data:a,key:a.LocationID})))))},Branches=React.memo(a=>{const b=document.getElementById("location-search-app").dataset.title||"Affinity Branch Locations";return a.locations&&Object.keys(a.locations).length?/*#__PURE__*/React.createElement("section",{className:"section",id:"branch-section","data-features":"Branches"},/*#__PURE__*/React.createElement("div",{className:"accordion-container"},/*#__PURE__*/React.createElement("div",{className:"container dir-col"},/*#__PURE__*/React.createElement("div",{id:"accordion-title",className:"accordion-title"},/*#__PURE__*/React.createElement("h3",{className:"heading heading-s"},b)),/*#__PURE__*/React.createElement("div",{id:"accordion-content",className:"accordion-content"},Object.keys(a.locations).map((c,d)=>/*#__PURE__*/React.createElement(Accordion,{data:a.locations[c],state:c,key:c,title:b})))))):void 0}),LocationSearch=a=>{const[b,c]=React.useReducer(reducer,{scriptLoad:!1,showApp:!0,location:{},result:{}}),[d,e]=React.useState(!0),[f,g]=React.useState({}),[h,i]=React.useState(""),[j,k]=React.useState([]),l=a=>{if(k(a),Object.keys(b.location).length){const c=Object.assign({},b.location);c.type=a.toString(),dispatcher({type:"SET_LOCATION",payload:c})}else{if(!map)return;const b=map.getCenter(),c=b.lat(),d=b.lng();dispatcher({type:"SET_LOCATION",payload:{type:a.toString(),lat:c,lng:d}})}};return React.useEffect(()=>{const a=document.querySelector("meta[name=\"csrf-token\"]").content;/* Unassign when component unmounts */return i(a),CSRF=a,dispatcher=c,initMapScript(),()=>dispatcher({type:"SCRIPT_LOAD",payload:null})},[]),React.useEffect(()=>{b.scriptLoad&&(window.calculateAndDisplayRoute=calculateAndDisplayRoute,initMap(),fetchBranches(h).then(a=>{a&&(g(sortAlphabetically(extractLocations(a))),dispatcher({type:"SET_RESULT",payload:a}))}))},[b.scriptLoad]),React.useEffect(()=>{if(Object.keys(b.location).length){removeDirectionRenderer();const a=Object.assign({},b.location);a.type=j.toString(),fetchLocations(a,h)}},[b.location]),React.useEffect(()=>{Object.keys(b.result).length&&(removeDragendListener(),addDragendListener(),setMarkers(b.result))},[b.result]),/*#__PURE__*/React.createElement(React.Fragment,null,b.scriptLoad&&b.showApp&&/*#__PURE__*/React.createElement(Search,null),b.showError&&/*#__PURE__*/React.createElement(ShowError,{text:"Address not found as entered. Please check your address and try again."}),/*#__PURE__*/React.createElement(Map,null),0!=Object.keys(b.location).length&&/*#__PURE__*/React.createElement(Filters,{parentCallback:l}),/*#__PURE__*/React.createElement(List,{locations:b.location,result:b.result}),/*#__PURE__*/React.createElement(Branches,{locations:f}),!b.showApp&&/*#__PURE__*/React.createElement(ShowError,{text:"An error occurred while processing your request. Please contact us."}))},App=ReactDOM.createRoot(document.getElementById("location-search-app"));App.render(/*#__PURE__*/React.createElement(React.StrictMode,null,/*#__PURE__*/React.createElement(LocationSearch,null)));